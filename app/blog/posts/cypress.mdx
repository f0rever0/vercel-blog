---
title: "E2E test를 위한 cypress 도입하기"
publishedAt: "2024-05-17"
summary: "cypress 도입하기"
---

## 1. 배경

서비스 런칭 후, 테스트 코드를 작성할 수 있는 상황이 생겨서 주요 기능들에 대해서 테스트 코드를 작성하기로 하였다. 따로 QA 팀이 없다보니까 앞으로 버그 수정이나 새로운 기능을 추가할 때 코드와 프로덕트의 품질을 안정적으로 유지하기 위해 내린 결정이다. 마침 CI/CD 파이프라인 고도화를 위한 협업 요청이 들어와서 테스트 코드를 기반으로 CI 파이프라인도 함께 구축하기로 하였다.
![협업요청 글](https://github.com/f0rever0/f0rever0/assets/62867581/c7fff2d4-deb9-45d7-9df4-bf4f6fc29aaa)

여러가지의 테스트 라이브러리가 있지만, 서비스 특성상 유닛 테스트보다는 유저 플로우에 따라 정상적으로 LLM과 소통하는지가 핵심이었기에, e2e 테스트를 위한 cypress 를 도입하기로 하였다.

## 2. 도입

유저플로우를 어떻게 잡을 것인가에 대해서는 기획팀에서 진행하는 데일리테스트를 기반으로 테스트 시나리오를 작성하였다.

![cypress 예시](https://github.com/f0rever0/f0rever0/assets/62867581/9118da98-0660-481b-97ba-b916ff64c5bd)

서비스 특성상 LLM과의 커넥션이 유지되었는지도 테스트할 때 체크해야하다보니 mock 데이터가 아닌 실제 API를 사용해 테스트를 진행하였다.

## 3. 결과

테스트 시트를 기반으로 e2e 테스트 시나리오를 작성하다보니, 전체적인 프로젝트를 파악할 수 있었고 추가적인 개발을 할때 테스트 코드로 사이드 이팩트를 캐치할 수 있어서 편하게 코드를 작성할 수 있었다.
