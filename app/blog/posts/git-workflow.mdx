---
title: "git action workflow yaml íŒŒì¼ ì‘ì„±í•˜ê¸°"
publishedAt: "2024-06-02"
summary: "CI/CD ê³ ë„í™”ì‘ì—…ì„ ìœ„í•œ git workflow íŒŒì¼ ì‘ì„±í•˜ê¸°"
---

## 1. ë°°ê²½

íšŒì‚¬ ë‚´ í”„ë¡œë•íŠ¸ CI/CD ê³ ë„í™”ì‘ì—…ì„ ìœ„í•´ git action workflow fileë¥¼ ì‘ì„±í•˜ì˜€ë‹¤.

## 2. ë„ì…

ë¨¼ì €, workflow íŒŒì¼ì´ `dev`, `qa`, `stg`, `main` ë¸Œëœì¹˜ì— ëŒ€í•œ pull requestê°€ ìˆì„ ë•Œë§Œ íŠ¸ë¦¬ê±°ë˜ê²Œ í•˜ì˜€ë‹¤.

ë‹¤ìŒê³¼ ê°™ì´ devì—ì„œ qaë¡œ pull requestë¥¼ ì—´ê²Œ ë˜ë©´ github docsì— ë”°ë¼ ë¸Œëœì¹˜ë¥¼ ì§€ì¹­í•  ìˆ˜ ìˆë‹¤.

dev( `head_ref`, ì†ŒìŠ¤ ë¸Œëœì¹˜ ) -> qa( `base_ref`, íƒ€ê²Ÿ ë¸Œëœì¹˜ )

cypress í…ŒìŠ¤íŠ¸ë¥¼ ì‹¤í–‰í•˜ê¸° ìœ„í•´ì„œëŠ” 2ë‹¨ê³„ë¥¼ ê±°ì¹œë‹¤.

1. forkí•œ ë¸Œëœì¹˜ì—ì„œ prì„ ìƒì„±í• ë•ŒëŠ” devë¡œ build, ê·¸ ì™¸ì— ë¸Œëœì¹˜ì¼ê²½ìš°ëŠ” ì†ŒìŠ¤ë¸Œëœì¹˜ ê¸°ì¤€ìœ¼ë¡œ build ì§„í–‰
2. cypressë¥¼ ì‹¤í–‰í•  ë•Œ ì†ŒìŠ¤ ë¸Œëœì¹˜ ê¸°ì¤€ìœ¼ë¡œ(head_ref) config cypress config íŒŒì¼ì´ ì£¼ì…

```
name: front test check

on:
  pull_request:
    branches: [dev, qa, stg, main]

jobs:
  cypress-run:
    runs-on: ubuntu-latest
    steps:
    - name: Checkout
      uses: actions/checkout@v4
    - name: yarn install
      run: yarn install --immutable
    - name: yarn build ( when building on feature )
      if: ${{ github.base_ref == 'dev' }}
      run: yarn build:${{ github.base_ref }}
    - name: yarn build ( when building on dev, qa, stg )
      if: ${{ github.base_ref == 'qa' || github.base_ref == 'stg' || github.base_ref == 'main' }}
      run: yarn build:${{ github.head_ref }}
    - name: Cypress run with env ( when merge from dev )
      if: ${{ github.head_ref == 'dev' }}
      uses: cypress-io/github-action@v6
      with:
        start: yarn preview
        config-file: cypress.config.js
      env:
        // CYPRESS_ENVIRONMENT :
        // CYPRESS_NUXT_APP_API_URL :
    - name: Cypress run with env ( when merge from qa )
      if: ${{ github.head_ref == 'qa'}}
      uses: cypress-io/github-action@v6
      with:
        start: yarn preview
        config-file: cypress.config.js
      env:
        // CYPRESS_ENVIRONMENT :
        // CYPRESS_NUXT_APP_API_URL :
    - name: Cypress run with env ( when merge from stg )
      if: ${{ github.head_ref == 'stg' }}
      uses: cypress-io/github-action@v6
      with:
        start: yarn preview
        config-file: cypress.config.js
      env:
        // CYPRESS_ENVIRONMENT :
        // CYPRESS_NUXT_APP_API_URL :
    - name: Cypress run with env ( when merge from main )
      if: ${{ github.head_ref == 'main' }}
      uses: cypress-io/github-action@v6
      with:
        start: yarn preview
        config-file: cypress.config.js
      env:
        // CYPRESS_ENVIRONMENT :
        // CYPRESS_NUXT_APP_API_URL :
```

## 3. ê²°ê³¼

workflowë¥¼ ì‘ì„±í•´ë³´ëŠ” ê²ƒì€ ì²˜ìŒì´ë¼ êµ‰ì¥íˆ ì–´ë ¤ì› ë‹¤. í…ŒìŠ¤íŠ¸ë¥¼ í•˜ë ¤ë©´ pushë¥¼ í•´ì„œ actionì´ ë‹¤ ëŒì•„ì•¼ë§Œ ì„±ê³µ/ì‹¤íŒ¨ê°€ í™•ì¸ë˜ê¸° ë•Œë¬¸ì— ì‘ì—…í•˜ëŠ”ë° ì‹œê°„ì´ ê±¸ë ¸ë‹¤. í•˜ì§€ë§Œ ì´ë¥¼ í†µí•´ github docsë„ ì½ê³  ë¸Œëœì¹˜ êµ¬ì„± ì „ëµì— ëŒ€í•´ ë‹¤ì‹œ ê³ ë¯¼í•´ë³¼ ìˆ˜ ìˆì—ˆë‹¤. ë˜í•œ ì´í›„ ë²„ê·¸ ìˆ˜ì •ì„ í• ë•Œì—ë„ í…ŒìŠ¤íŠ¸ ì½”ë“œ ì„±ê³µì—¬ë¶€ë¥¼ ë°”ë¡œ í™•ì¸í•  ìˆ˜ ìˆì–´ì„œ ê°œë°œì˜ ì•ˆì •ì„±ì´ ì˜¬ë¼ê°„ ê²ƒ ê°™ë‹¤!

ğŸ™‡â€â™‚ï¸ ì°¸ê³ ë¬¸í—Œ

[GitHub Docs](https://docs.github.com/en/actions/learn-github-actions/contexts)
